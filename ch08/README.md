# Chapter08. 경계

> [@goo314](https://github.com/goo314), 2022-07-23

## 외부 코드 사용하기

- 인터페이스 제공자와 사용자 사이에는 특유의 긴장이 존재한다.
  - 패키지 제공자나 프레임워크 제공자는 적용성을 최대한 넓히려 애쓴다.
  - 사용자는 자신의 요구에 집중하는 인터페이스를 바란다.
- 경계 인터페이스를 이용할 때는 이를 이용하는 클래스나 클래스 계열 밖으로 노출되지 않도록 주의한다.

```typescript
// Sensor라는 객체를 담는 Map 생성
// Sensor 객체 가져오기

// Generics <String, Seonsor>를 사용

// 경계 인터페이스인 Map을 Sensors 안으로 숨기기
```

## 경계 살피고 익히기

- 외부 코드를 익히기 어렵고 통합하기도 어렵다.
- 학습 테스트 (Jim Newkirk) : 우리쪽 코드를 작성해 외부 코드를 호출하는 대신 간단한 테스트 케이스를 작성해 외부 코드를 익히기

## log4j 익히기

- 아파치의 log4j 패키지

```typescript
// 화면에 "hello"를 출력하는 테스트 케이스
// Appender가 필요하다는 오류 발생

// ConsoleAppender 클래스 생성 후 다시 실행
// Appender 출력 스트림이 없다는 사실 발견

// 제대로 동작
// Console.Appender.SYSTEM_OUT 인수를 제거하면 정상적으로 동작
// PatternLayout을 제거하면 출력 스트림이 없다는 오류

// 간단한 콘솔 로거를 초기화 하는 방법을 익혔으니
// [8-1] 독자적인 로거 클래스로 캡슐화
```

## 학습 테스트는 공짜 이상이다

- 투자하는 노력보다 얻는 성과가 더 크다.
- 학습 테스트는 패키지가 예상대로 도는지 검증한다.
- 새 버전이 우리 코드와 호환되지 않으면 학습 테스트가 이 사실을 곧바로 밝혀낸다.

## 아직 존재하지 않는 코드를 사용하기

- 경계와 관련해 또 다른 유형은 아는 코드와 모르는 코드를 분리하는 경계이다.
- 무선통선 시스템에 들어갈 소프트웨어 개발
  - 우리는 Transmitter라는 하위 시스템에 대한 지식이 거의 없었다.
  - 시스템을 책임진 사람들은 인터페이스도 정의하지 못한 상태였다.
  - 우리는 자체적으로 인터페이스를 정의했다.
    - 우리가 인터페이스를 전적으로 통제한다.
  - 저쪽팀이 송신기 API를 정의한 후 TransmitterAdapter를 구현해 간극을 매꿨다.
  - API 사용을 캡슐화해 API가 바뀔떄 수정할 코드를 한 곳으로 모았다.
  - 테스트도 아주 편하다.

## 깨끗한 경계

- 통제하지 못하는 코드를 사용할 때는 너무 많은 투자를 하거나 향후 변경 비용이 지나치게 커지지 않도록 각별히 주의해야 한다.
- 경계에 위치하는 코드는 깔끔히 분리한다.
- 기대치를 정의하는 테스트 케이스도 작성한다.
- 외부 패키지를 호출하는 코드를 가능한 줄여 경계를 관리한다.
